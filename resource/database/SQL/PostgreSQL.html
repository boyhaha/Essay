<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PostgreSQL | 娃哈哈</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/Essay/assets/css/0.styles.c2c42747.css" as="style"><link rel="preload" href="/Essay/assets/js/app.a80fbb9d.js" as="script"><link rel="preload" href="/Essay/assets/js/2.8038fab4.js" as="script"><link rel="preload" href="/Essay/assets/js/35.21e76c2a.js" as="script"><link rel="prefetch" href="/Essay/assets/js/10.d8b1a154.js"><link rel="prefetch" href="/Essay/assets/js/100.7db36d3e.js"><link rel="prefetch" href="/Essay/assets/js/101.539e079a.js"><link rel="prefetch" href="/Essay/assets/js/102.60f3f596.js"><link rel="prefetch" href="/Essay/assets/js/103.5cf0b0ef.js"><link rel="prefetch" href="/Essay/assets/js/104.c5acb4f8.js"><link rel="prefetch" href="/Essay/assets/js/105.875d1427.js"><link rel="prefetch" href="/Essay/assets/js/106.cd36f389.js"><link rel="prefetch" href="/Essay/assets/js/107.61b2bcb8.js"><link rel="prefetch" href="/Essay/assets/js/108.c5b3729c.js"><link rel="prefetch" href="/Essay/assets/js/109.186761ec.js"><link rel="prefetch" href="/Essay/assets/js/11.dc0f7e43.js"><link rel="prefetch" href="/Essay/assets/js/110.e1178217.js"><link rel="prefetch" href="/Essay/assets/js/111.d6e3b10d.js"><link rel="prefetch" href="/Essay/assets/js/112.a2273a63.js"><link rel="prefetch" href="/Essay/assets/js/113.4bc2194e.js"><link rel="prefetch" href="/Essay/assets/js/114.83c0da9e.js"><link rel="prefetch" href="/Essay/assets/js/115.377d3b38.js"><link rel="prefetch" href="/Essay/assets/js/116.8b89df9e.js"><link rel="prefetch" href="/Essay/assets/js/117.ba4a745e.js"><link rel="prefetch" href="/Essay/assets/js/118.7befd86b.js"><link rel="prefetch" href="/Essay/assets/js/119.5cb9e736.js"><link rel="prefetch" href="/Essay/assets/js/12.9f54eac8.js"><link rel="prefetch" href="/Essay/assets/js/120.3dceb437.js"><link rel="prefetch" href="/Essay/assets/js/121.ee374884.js"><link rel="prefetch" href="/Essay/assets/js/122.704ef5b3.js"><link rel="prefetch" href="/Essay/assets/js/123.9df7c468.js"><link rel="prefetch" href="/Essay/assets/js/124.0079dc4e.js"><link rel="prefetch" href="/Essay/assets/js/125.1c35db4d.js"><link rel="prefetch" href="/Essay/assets/js/126.ad34db6c.js"><link rel="prefetch" href="/Essay/assets/js/127.182d8330.js"><link rel="prefetch" href="/Essay/assets/js/128.2e28a55e.js"><link rel="prefetch" href="/Essay/assets/js/129.45352a45.js"><link rel="prefetch" href="/Essay/assets/js/13.3dfee7fc.js"><link rel="prefetch" href="/Essay/assets/js/130.7067b0a5.js"><link rel="prefetch" href="/Essay/assets/js/131.5a617dd5.js"><link rel="prefetch" href="/Essay/assets/js/132.8b876933.js"><link rel="prefetch" href="/Essay/assets/js/133.eceb37fa.js"><link rel="prefetch" href="/Essay/assets/js/134.b3b3bf32.js"><link rel="prefetch" href="/Essay/assets/js/14.8eb6643f.js"><link rel="prefetch" href="/Essay/assets/js/15.47bf816d.js"><link rel="prefetch" href="/Essay/assets/js/16.8e1e6409.js"><link rel="prefetch" href="/Essay/assets/js/17.351e5221.js"><link rel="prefetch" href="/Essay/assets/js/18.2d741aec.js"><link rel="prefetch" href="/Essay/assets/js/19.50a95ad7.js"><link rel="prefetch" href="/Essay/assets/js/20.20933090.js"><link rel="prefetch" href="/Essay/assets/js/21.753ac72d.js"><link rel="prefetch" href="/Essay/assets/js/22.16d9fab4.js"><link rel="prefetch" href="/Essay/assets/js/23.c059045d.js"><link rel="prefetch" href="/Essay/assets/js/24.1858533d.js"><link rel="prefetch" href="/Essay/assets/js/25.a80a5a19.js"><link rel="prefetch" href="/Essay/assets/js/26.ad8e4d2d.js"><link rel="prefetch" href="/Essay/assets/js/27.f948e35f.js"><link rel="prefetch" href="/Essay/assets/js/28.99e39dd5.js"><link rel="prefetch" href="/Essay/assets/js/29.04ab1fa3.js"><link rel="prefetch" href="/Essay/assets/js/3.efc4b50d.js"><link rel="prefetch" href="/Essay/assets/js/30.320a9a57.js"><link rel="prefetch" href="/Essay/assets/js/31.10d81723.js"><link rel="prefetch" href="/Essay/assets/js/32.139c331b.js"><link rel="prefetch" href="/Essay/assets/js/33.d6cfc0fa.js"><link rel="prefetch" href="/Essay/assets/js/34.13087510.js"><link rel="prefetch" href="/Essay/assets/js/36.ef4c84cd.js"><link rel="prefetch" href="/Essay/assets/js/37.4144758d.js"><link rel="prefetch" href="/Essay/assets/js/38.b3a39d81.js"><link rel="prefetch" href="/Essay/assets/js/39.8d3b3057.js"><link rel="prefetch" href="/Essay/assets/js/4.785ba770.js"><link rel="prefetch" href="/Essay/assets/js/40.cfe3f358.js"><link rel="prefetch" href="/Essay/assets/js/41.ebd80232.js"><link rel="prefetch" href="/Essay/assets/js/42.089f0163.js"><link rel="prefetch" href="/Essay/assets/js/43.bc1193eb.js"><link rel="prefetch" href="/Essay/assets/js/44.4661ca9b.js"><link rel="prefetch" href="/Essay/assets/js/45.54f74b21.js"><link rel="prefetch" href="/Essay/assets/js/46.05520589.js"><link rel="prefetch" href="/Essay/assets/js/47.103c5162.js"><link rel="prefetch" href="/Essay/assets/js/48.2221918f.js"><link rel="prefetch" href="/Essay/assets/js/49.affd2b58.js"><link rel="prefetch" href="/Essay/assets/js/5.3856f33a.js"><link rel="prefetch" href="/Essay/assets/js/50.371ebb22.js"><link rel="prefetch" href="/Essay/assets/js/51.b7424bc7.js"><link rel="prefetch" href="/Essay/assets/js/52.449bd607.js"><link rel="prefetch" href="/Essay/assets/js/53.e1a23788.js"><link rel="prefetch" href="/Essay/assets/js/54.a5c43449.js"><link rel="prefetch" href="/Essay/assets/js/55.bf9125bf.js"><link rel="prefetch" href="/Essay/assets/js/56.97a017ba.js"><link rel="prefetch" href="/Essay/assets/js/57.818b196e.js"><link rel="prefetch" href="/Essay/assets/js/58.d266d811.js"><link rel="prefetch" href="/Essay/assets/js/59.1a5862da.js"><link rel="prefetch" href="/Essay/assets/js/6.95185ac8.js"><link rel="prefetch" href="/Essay/assets/js/60.4dbaccc2.js"><link rel="prefetch" href="/Essay/assets/js/61.66a9ee5f.js"><link rel="prefetch" href="/Essay/assets/js/62.cf66c4a5.js"><link rel="prefetch" href="/Essay/assets/js/63.a66b4e1f.js"><link rel="prefetch" href="/Essay/assets/js/64.f2d9e839.js"><link rel="prefetch" href="/Essay/assets/js/65.2585444b.js"><link rel="prefetch" href="/Essay/assets/js/66.e8caab98.js"><link rel="prefetch" href="/Essay/assets/js/67.4732c60d.js"><link rel="prefetch" href="/Essay/assets/js/68.6901a57e.js"><link rel="prefetch" href="/Essay/assets/js/69.dd2c20f4.js"><link rel="prefetch" href="/Essay/assets/js/7.b1e544fc.js"><link rel="prefetch" href="/Essay/assets/js/70.0efbfb21.js"><link rel="prefetch" href="/Essay/assets/js/71.618e5c90.js"><link rel="prefetch" href="/Essay/assets/js/72.c176c459.js"><link rel="prefetch" href="/Essay/assets/js/73.5a6152a2.js"><link rel="prefetch" href="/Essay/assets/js/74.e2602a36.js"><link rel="prefetch" href="/Essay/assets/js/75.cf320c1c.js"><link rel="prefetch" href="/Essay/assets/js/76.c8567920.js"><link rel="prefetch" href="/Essay/assets/js/77.c78fd3f9.js"><link rel="prefetch" href="/Essay/assets/js/78.0c782841.js"><link rel="prefetch" href="/Essay/assets/js/79.c5de8d9a.js"><link rel="prefetch" href="/Essay/assets/js/8.8f0e916a.js"><link rel="prefetch" href="/Essay/assets/js/80.afd15913.js"><link rel="prefetch" href="/Essay/assets/js/81.3d58f37c.js"><link rel="prefetch" href="/Essay/assets/js/82.680ab1da.js"><link rel="prefetch" href="/Essay/assets/js/83.2df3b43a.js"><link rel="prefetch" href="/Essay/assets/js/84.fcc9d5f3.js"><link rel="prefetch" href="/Essay/assets/js/85.c369ecad.js"><link rel="prefetch" href="/Essay/assets/js/86.ba84f120.js"><link rel="prefetch" href="/Essay/assets/js/87.9eb720ee.js"><link rel="prefetch" href="/Essay/assets/js/88.37251e42.js"><link rel="prefetch" href="/Essay/assets/js/89.61d52175.js"><link rel="prefetch" href="/Essay/assets/js/9.c49b5d08.js"><link rel="prefetch" href="/Essay/assets/js/90.7512f5da.js"><link rel="prefetch" href="/Essay/assets/js/91.34ca5084.js"><link rel="prefetch" href="/Essay/assets/js/92.e9925b38.js"><link rel="prefetch" href="/Essay/assets/js/93.5b7ccfd7.js"><link rel="prefetch" href="/Essay/assets/js/94.2e84d602.js"><link rel="prefetch" href="/Essay/assets/js/95.c54e75c8.js"><link rel="prefetch" href="/Essay/assets/js/96.f8a27d66.js"><link rel="prefetch" href="/Essay/assets/js/97.b4cc005a.js"><link rel="prefetch" href="/Essay/assets/js/98.7c70b73d.js"><link rel="prefetch" href="/Essay/assets/js/99.4e213b11.js">
    <link rel="stylesheet" href="/Essay/assets/css/0.styles.c2c42747.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Essay/" class="home-link router-link-active"><img src="/Essay/1.gif" alt="娃哈哈" class="logo"> <span class="site-name can-hide">娃哈哈</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Essay/resource/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="github" class="dropdown-title"><span class="title">github</span> <span class="arrow down"></span></button> <button type="button" aria-label="github" class="mobile-dropdown-title"><span class="title">github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/boyhaha" target="_blank" rel="noopener noreferrer" class="nav-link external">
  娃哈哈
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Essay/resource/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="github" class="dropdown-title"><span class="title">github</span> <span class="arrow down"></span></button> <button type="button" aria-label="github" class="mobile-dropdown-title"><span class="title">github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/boyhaha" target="_blank" rel="noopener noreferrer" class="nav-link external">
  娃哈哈
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>课外延伸</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>book</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>数据库</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Essay/resource/database/connect.html" class="sidebar-link">连接数据库</a></li><li><a href="/Essay/resource/database/Redis.html" class="sidebar-link">Redis</a><ul class="sidebar-sub-headers"></ul></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>SQL</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Essay/resource/database/SQL/article.html" class="sidebar-link">SQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Essay/resource/database/SQL/article.html#_1-无限容量数据库架构设计" class="sidebar-link">1. 无限容量数据库架构设计</a></li><li class="sidebar-sub-header"><a href="/Essay/resource/database/SQL/article.html#_2-mysql命名-设计及使用规范" class="sidebar-link">2. MySQL命名, 设计及使用规范</a></li></ul></li><li><a href="/Essay/resource/database/SQL/MySQL.html" class="sidebar-link">MySQL</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Essay/resource/database/SQL/PostgreSQL.html" aria-current="page" class="active sidebar-link">PostgreSQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Essay/resource/database/SQL/PostgreSQL.html#常见命令" class="sidebar-link">常见命令</a></li><li class="sidebar-sub-header"><a href="/Essay/resource/database/SQL/PostgreSQL.html#其他" class="sidebar-link">其他</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>MongoDB</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>elasticsearch</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面试必看</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/Essay/resource/language/" class="sidebar-link">编程语言</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Essay/resource/language/#golang" class="sidebar-link">Golang</a></li><li class="sidebar-sub-header"><a href="/Essay/resource/language/#python" class="sidebar-link">Python</a></li></ul></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Essay/resource/others/" class="sidebar-heading clickable"><span>其他</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Essay/resource/system/" class="sidebar-heading clickable"><span>操作系统</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Essay/resource/tools/" class="sidebar-heading clickable"><span>软件</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/Essay/resource/travel/#%20%E6%9B%B4%E6%8D%A2%E6%89%8B%E6%9C%BA%E5%8F%B7.html" class="sidebar-link">旅行规划</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="postgresql"><a href="#postgresql" class="header-anchor">#</a> PostgreSQL</h1> <h2 id="常见命令"><a href="#常见命令" class="header-anchor">#</a> 常见命令</h2> <h3 id="sql"><a href="#sql" class="header-anchor">#</a> SQL</h3> <ul><li>删除table
<ul><li><blockquote><p>DROP TABLE table_name;</p></blockquote></li></ul></li> <li>seq
<ul><li>设置序列seq
<ul><li><blockquote><p>SELECT setval('table_id_seq', 1010);</p></blockquote></li></ul></li> <li>删除序列
<ul><li>DROP SEQUENCE seq_name[, ...]</li></ul></li></ul></li></ul> <h2 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h2> <h3 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h3> <div class="language- extra-class"><pre class="language-text"><code>sudo env LDFLAGS='-L/usr/local/lib -L/usr/local/opt/openssl/lib
-L/usr/local/opt/readline/lib' pip install psycopg2
</code></pre></div><h3 id="数据导入-导出"><a href="#数据导入-导出" class="header-anchor">#</a> 数据导入, 导出</h3> <p>-- pg_dump -h 生产数据库IP -U 生产数据库账号 -d 生产数据库实例 -t wh_photo -f wh_photo.sql
-- pg_dump -h 192.168.200.12 -U sneaky -d sneaky -t pw_item_detail -f pw_item_detail.sql
-- DYHY$D#e8@q
-- psql -h localhost -U test -d postgres -f gift.sql</p> <h3 id="数据结构"><a href="#数据结构" class="header-anchor">#</a> 数据结构</h3> <ul><li>数组</li> <li><code>sql CREATE TABLE emptable ( 　　arraycol1 integer[], 　　arraycol2 text[][], 　　arraycol3 text[3], -- 数字表示数组长度 　　arraycol4 integer ARRAY, 　　arraycol5 integer ARRAY[4] );</code></li> <li>操作:
<ul><li>&lt;&gt; 不等于</li> <li>@&gt; 包含</li> <li>&lt;@ 包含于</li> <li>&amp;&amp; 重叠</li> <li>not [A] &amp;&amp; [B]</li></ul></li> <li>字符串</li> <li>varchar和char 最大长度都是10485760（1GB）, 区别仅在于边长</li> <li>text和varchar几乎无性能差别，区别仅在于存储结构的不同</li></ul> <h3 id="注释"><a href="#注释" class="header-anchor">#</a> 注释</h3> <ul><li><p>添加注释</p></li> <li><p>``` --语法 comment on [type] [target] is [comment]
--为表添加注释 comment on table user is 'The user table'; --为字段注释 comment on column user.userid is 'The user ID';</p> <p>```</p></li> <li><p>查询注释</p></li> <li><p>``` --查询字段注释，objsubid为表中字段的序号，从左侧从1开始 select description from pg_description join pg_class on pg_description.objoid = pg_class.oid where relname = 'tablename'</p> <p>--查询表名、表注释 select relname as tabname, cast(obj_description(relfilenode,'pg_class') as varchar) as comment from pg_class c where relkind = 'r' and relname not like 'pg_%' and relname not like 'sql_%' order by relname</p> <p>```</p></li></ul> <h3 id="执行计划-explain"><a href="#执行计划-explain" class="header-anchor">#</a> 执行计划 EXPLAIN</h3> <ul><li><h5 id="explain-语法"><a href="#explain-语法" class="header-anchor">#</a> EXPLAIN 语法</h5></li> <li><p>``` EXPLAIN [ ( option [, ...] ) ] statement EXPLAIN [ ANALYZE ] [ VERBOSE ] statement</p> <p>where option can be one of:</p> <div class="language- extra-class"><pre class="language-text"><code>ANALYZE [ boolean ]
VERBOSE [ boolean ]
COSTS [ boolean ]
BUFFERS [ boolean ]
TIMING [ boolean ]
SUMMARY [ boolean ]
FORMAT { TEXT | XML | JSON | YAML }
</code></pre></div><p>```</p></li> <li><p>ANALYZE 选项为TRUE 会实际执行SQL，并获得相应的查询计划，输出真实执行信息</p> <ul><li>actual time 执行时间( 节点启动时间...实际需要时间)</li></ul></li> <li><p>VERBOSE 选项为TRUE 会显示查询计划的附加信息，默认为FALSE。附加信息包括查询计划中每个节点（后面具体解释节点的含义）输出的列（Output），表的SCHEMA 信息，函数的SCHEMA 信息，表达式中列所属表的别名，被触发的触发器名称等。</p></li> <li><p>COSTS 选项为TRUE 会显示每个计划节点的预估启动代价（找到第一个符合条件的结果的代价）和总代价，以及预估行数和每行宽度，默认为TRUE。</p></li> <li><p>BUFFERS 选项为TRUE 会显示关于缓存的使用信息，默认为FALSE。该参数只能与ANALYZE 参数一起使用。缓冲区信息包括共享块（常规表或者索引块）、本地块（临时表或者索引块）和临时块（排序或者哈希等涉及到的短期存在的数据块）的命中块数，更新块数，挤出块数。</p></li> <li><p>TIMING 选项为TRUE 会显示每个计划节点的实际启动时间和总的执行时间，默认为TRUE。该参数只能与ANALYZE 参数一起使用。因为对于一些系统来说，获取系统时间需要比较大的代价，如果只需要准确的返回行数，而不需要准确的时间，可以把该参数关闭。</p></li> <li><p>SUMMARY 选项为TRUE 会在查询计划后面输出总结信息，例如查询计划生成的时间和查询计划执行的时间。当ANALYZE 选项打开时，它默认为TRUE。</p></li> <li><p>FORMAT 指定输出格式，默认为TEXT。各个格式输出的内容都是相同的，其中XML | JSON | YAML 更有利于我们通过程序解析SQL 语句的查询计划，为了更有利于阅读，我们下文的例子都是使用TEXT 格式的输出结果。</p></li> <li><h5 id="explain-输出结构"><a href="#explain-输出结构" class="header-anchor">#</a> EXPLAIN 输出结构</h5></li> <li><p>一个树形结构的 查询计划树, 树的每个节点包括对应节点类型,作用对象以及其它</p></li> <li><p>执行特点</p> <ul><li>按照查询计划数从低往上执行</li> <li>基于火山模型执行</li></ul></li> <li><h5 id="节点类型"><a href="#节点类型" class="header-anchor">#</a> 节点类型</h5></li> <li><p>控制节点（Control Node)</p></li> <li><p>扫描节点（ScanNode)</p> <ul><li>Seq Scan，顺序扫描</li> <li>Index Scan，基于索引扫描，但不只是返回索引列的值</li> <li>IndexOnly Scan，基于索引扫描，并且只返回索引列的值，简称为覆盖索引</li> <li>BitmapIndex Scan，利用Bitmap 结构扫描</li> <li>BitmapHeap Scan，把BitmapIndex Scan 返回的Bitmap 结构转换为元组结构</li> <li>Tid Scan，用于扫描一个元组TID 数组</li> <li>Subquery Scan，扫描一个子查询</li> <li>Function Scan，处理含有函数的扫描</li> <li>TableFunc Scan，处理tablefunc 相关的扫描</li> <li>Values Scan，用于扫描Values 链表的扫描</li> <li>Cte Scan，用于扫描WITH 字句的结果集</li> <li>NamedTuplestore Scan，用于某些命名的结果集的扫描</li> <li>WorkTable Scan，用于扫描Recursive Union 的中间数据</li> <li>Foreign Scan，用于外键扫描</li> <li>Custom Scan，用于用户自定义的扫描</li></ul></li> <li><p>物化节点（Materialization Node)</p></li> <li><p>连接节点（Join Node)</p></li> <li><p>Tips</p> <ul><li>大多数情况下，Index Scan 要比 Seq Scan 快。但是如果获取的结果集占所有数据的比重很大时，这时Index Scan 因为要先扫描索引再读表数据反而不如直接全表扫描来的快。</li> <li>如果获取的结果集的占比比较小，但是元组数很多时，可能Bitmap Index Scan 的性能要比Index Scan 好。</li> <li>如果获取的结果集能够被索引覆盖，则Index Only Scan 因为不用去读数据，只扫描索引，性能一般最好。但是如果VM 文件未生成，可能性能就会比Index Scan 要差。</li></ul></li></ul> <h3 id="备库"><a href="#备库" class="header-anchor">#</a> 备库</h3> <ul><li>PostgreSQL 的基于流复制的物理备库是基于redo的物理块复制备库，允许开放只读的功能，但是需要注意，由于主库可能不断的产生redo，这些redo可能会与备库的QUERY产生冲突。</li></ul> <h3 id="常用命令"><a href="#常用命令" class="header-anchor">#</a> 常用命令</h3> <div class="language- extra-class"><pre class="language-text"><code>\h：查看SQL命令的解释，比如\h select。
\?：查看psql命令列表。
\l：列出所有数据库。
\c [database_name]：连接其他数据库。
\d：列出当前数据库的所有表格。
\d [table_name]：列出某一张表格的结构。
\du：列出所有用户。
\e：打开文本编辑器。
\conninfo：列出当前数据库和连接的信息。
\password uesrname :修改数据库用户密码。


\dn: 查看模式
\dS+: 查看系统表, S表示系统
</code></pre></div><h3 id="自定义函数"><a href="#自定义函数" class="header-anchor">#</a> 自定义函数</h3> <ul><li><p>基础概念</p></li> <li><p>schema</p> <ul><li><p>类似于命名空间,或者是一个文件系统中的目录, schema不能嵌套,同一schema下不能有同名对象</p></li> <li><p>pg_catalog存放了各系统表,内置函数</p></li> <li><table><thead><tr><th>目录名</th> <th>用途</th> <th>...</th></tr></thead> <tbody><tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-aggregate.html" target="_blank" rel="noopener noreferrer"><code>pg_aggregate</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>聚集函数</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-am.html" target="_blank" rel="noopener noreferrer"><code>pg_am</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>索引访问方法</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-amop.html" target="_blank" rel="noopener noreferrer"><code>pg_amop</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>访问方法操作符</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-amproc.html" target="_blank" rel="noopener noreferrer"><code>pg_amproc</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>访问方法支持过程</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-attrdef.html" target="_blank" rel="noopener noreferrer"><code>pg_attrdef</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>列默认值</td> <td>✅</td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-attribute.html" target="_blank" rel="noopener noreferrer"><code>pg_attribute</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>表列(“属性”)</td> <td>✅</td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-authid.html" target="_blank" rel="noopener noreferrer"><code>pg_authid</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>认证标识符（角色）</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-auth-members.html" target="_blank" rel="noopener noreferrer"><code>pg_auth_members</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>认证标识符成员关系</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-cast.html" target="_blank" rel="noopener noreferrer"><code>pg_cast</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>转换（数据类型转换）</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-class.html" target="_blank" rel="noopener noreferrer"><code>pg_class</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>表、索引、序列、视图 （“关系”）</td> <td>✅</td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-collation.html" target="_blank" rel="noopener noreferrer"><code>pg_collation</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>排序规则（locale信息）</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-constraint.html" target="_blank" rel="noopener noreferrer"><code>pg_constraint</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>检查约束、唯一约束、主键约束、外键约束</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-conversion.html" target="_blank" rel="noopener noreferrer"><code>pg_conversion</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>编码转换信息</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-database.html" target="_blank" rel="noopener noreferrer"><code>pg_database</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>本数据库集簇中的数据库</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-db-role-setting.html" target="_blank" rel="noopener noreferrer"><code>pg_db_role_setting</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>每角色和每数据库的设置</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-default-acl.html" target="_blank" rel="noopener noreferrer"><code>pg_default_acl</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>对象类型的默认权限</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-depend.html" target="_blank" rel="noopener noreferrer"><code>pg_depend</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>数据库对象间的依赖</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-description.html" target="_blank" rel="noopener noreferrer"><code>pg_description</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>数据库对象上的描述或注释</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-enum.html" target="_blank" rel="noopener noreferrer"><code>pg_enum</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>枚举标签和值定义</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-event-trigger.html" target="_blank" rel="noopener noreferrer"><code>pg_event_trigger</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>事件触发器</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-extension.html" target="_blank" rel="noopener noreferrer"><code>pg_extension</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>已安装扩展</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-foreign-data-wrapper.html" target="_blank" rel="noopener noreferrer"><code>pg_foreign_data_wrapper</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>外部数据包装器定义</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-foreign-server.html" target="_blank" rel="noopener noreferrer"><code>pg_foreign_server</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>外部服务器定义</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-foreign-table.html" target="_blank" rel="noopener noreferrer"><code>pg_foreign_table</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>外部表信息</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-index.html" target="_blank" rel="noopener noreferrer"><code>pg_index</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>索引信息</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-inherits.html" target="_blank" rel="noopener noreferrer"><code>pg_inherits</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>表继承层次</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-init-privs.html" target="_blank" rel="noopener noreferrer"><code>pg_init_privs</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>对象初始特权</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-language.html" target="_blank" rel="noopener noreferrer"><code>pg_language</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>编写函数的语言</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-largeobject.html" target="_blank" rel="noopener noreferrer"><code>pg_largeobject</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>大对象的数据页</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-largeobject-metadata.html" target="_blank" rel="noopener noreferrer"><code>pg_largeobject_metadata</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>大对象的元数据</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-namespace.html" target="_blank" rel="noopener noreferrer"><code>pg_namespace</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>模式</td> <td>✅</td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-opclass.html" target="_blank" rel="noopener noreferrer"><code>pg_opclass</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>访问方法操作符类</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-operator.html" target="_blank" rel="noopener noreferrer"><code>pg_operator</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>操作符</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-opfamily.html" target="_blank" rel="noopener noreferrer"><code>pg_opfamily</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>访问方法操作符族</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-partitioned-table.html" target="_blank" rel="noopener noreferrer"><code>pg_partitioned_table</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>有关表的分区键的信息</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-pltemplate.html" target="_blank" rel="noopener noreferrer"><code>pg_pltemplate</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>过程语言的模板数据</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-policy.html" target="_blank" rel="noopener noreferrer"><code>pg_policy</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>行安全策略</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-proc.html" target="_blank" rel="noopener noreferrer"><code>pg_proc</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>函数和过程</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-publication.html" target="_blank" rel="noopener noreferrer"><code>pg_publication</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>逻辑复制的发布</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-publication-rel.html" target="_blank" rel="noopener noreferrer"><code>pg_publication_rel</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>与发布映射的关系</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-range.html" target="_blank" rel="noopener noreferrer"><code>pg_range</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>范围类型的信息</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-replication-origin.html" target="_blank" rel="noopener noreferrer"><code>pg_replication_origin</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>已注册的复制源</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-rewrite.html" target="_blank" rel="noopener noreferrer"><code>pg_rewrite</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>查询重写规则</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-seclabel.html" target="_blank" rel="noopener noreferrer"><code>pg_seclabel</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>数据库对象上的安全标签</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-sequence.html" target="_blank" rel="noopener noreferrer"><code>pg_sequence</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>有关序列的信息</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-shdepend.html" target="_blank" rel="noopener noreferrer"><code>pg_shdepend</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>共享对象上的依赖</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-shdescription.html" target="_blank" rel="noopener noreferrer"><code>pg_shdescription</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>共享对象上的注释</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-shseclabel.html" target="_blank" rel="noopener noreferrer"><code>pg_shseclabel</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>共享数据库对象上的安全标签</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-statistic.html" target="_blank" rel="noopener noreferrer"><code>pg_statistic</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>规划器统计</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-statistic-ext.html" target="_blank" rel="noopener noreferrer"><code>pg_statistic_ext</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>扩展的规划器统计</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-subscription.html" target="_blank" rel="noopener noreferrer"><code>pg_subscription</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>逻辑复制订阅</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-subscription-rel.html" target="_blank" rel="noopener noreferrer"><code>pg_subscription_rel</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>订阅的关系状态</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-tablespace.html" target="_blank" rel="noopener noreferrer"><code>pg_tablespace</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>本数据库集簇内的表空间</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-transform.html" target="_blank" rel="noopener noreferrer"><code>pg_transform</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>转换（将数据类型转换为过程语言需要的形式）</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-trigger.html" target="_blank" rel="noopener noreferrer"><code>pg_trigger</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>触发器</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-ts-config.html" target="_blank" rel="noopener noreferrer"><code>pg_ts_config</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>文本搜索配置</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-ts-config-map.html" target="_blank" rel="noopener noreferrer"><code>pg_ts_config_map</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>文本搜索配置的记号映射</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-ts-dict.html" target="_blank" rel="noopener noreferrer"><code>pg_ts_dict</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>文本搜索字典</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-ts-parser.html" target="_blank" rel="noopener noreferrer"><code>pg_ts_parser</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>文本搜索分析器</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-ts-template.html" target="_blank" rel="noopener noreferrer"><code>pg_ts_template</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>文本搜索模板</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-type.html" target="_blank" rel="noopener noreferrer"><code>pg_type</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>数据类型</td> <td></td></tr> <tr><td><a href="http://www.postgres.cn/docs/10/catalog-pg-user-mapping.html" target="_blank" rel="noopener noreferrer"><code>pg_user_mapping</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>将用户映射到外部服务器</td> <td></td></tr></tbody></table></li> <li><p>pg_class</p> <ul><li><p>目录<code>pg_class</code>记录表和几乎所有具有列或者像表的东西。 这包括索引（但还要参见<code>pg_index</code>）、序列 （<code>pg_sequence</code>）、视图、物化视图、组合类型和TOAST表</p></li> <li><table><thead><tr><th>名称</th> <th>类型</th> <th>引用</th> <th>描述</th></tr></thead> <tbody><tr><td><code>oid</code></td> <td><code>oid</code></td> <td></td> <td>行标识符（隐藏属性，必须被显式选择才会显示）</td></tr> <tr><td><code>relname</code></td> <td><code>name</code></td> <td></td> <td>表、索引、视图等的名字</td></tr> <tr><td><code>relnamespace</code></td> <td><code>oid</code></td> <td><code>pg_namespace.oid</code></td> <td>包含该关系的名字空间的OID</td></tr></tbody></table></li></ul></li> <li><p>pg_attribute</p> <ul><li><p>存储有关表列的信息。数据库中的每一个表的每一个列都恰好在<code>pg_attribute</code>中有一行。（这其中也会有索引的属性项，并且事实上所有具有<code>pg_class</code>项的对象在这里都有属性项)</p></li> <li><table><thead><tr><th>名称</th> <th>类型</th> <th>引用</th> <th>描述</th></tr></thead> <tbody><tr><td><code>attrelid</code></td> <td><code>oid</code></td> <td><code>pg_class.oid</code></td> <td>列所属的表</td></tr> <tr><td><code>attname</code></td> <td><code>name</code></td> <td></td> <td>列名</td></tr> <tr><td><code>atttypid</code></td> <td><code>oid</code></td> <td><code>pg_type.oid</code></td> <td>列的数据类型</td></tr> <tr><td><code>attnum</code></td> <td><code>int2</code></td> <td></td> <td>列的编号。一般列从1开始向上编号。系统列（如<code>oid</code>）则拥有（任意）负值编号。</td></tr> <tr><td><code>attisdropped</code></td> <td><code>bool</code></td> <td></td> <td>该列被删除且不再有效。一个删除的列仍然物理存在于表中，但是会被分析器忽略并因此无法通过SQL访问。</td></tr> <tr><td><code>atttypmod</code></td> <td><code>int4</code></td> <td></td> <td><code>atttypmod</code>记录了在表创建时提供的类型相关数据（例如一个<code>varchar</code>列的最大长度）。它会被传递给类型相关的输入函数和长度强制函数。对于那些不需要<code>atttypmod</code>的类型，这个值通常总是为-1。</td></tr> <tr><td><code>attnotnull</code></td> <td><code>bool</code></td> <td></td> <td>这表示一个非空约束。</td></tr> <tr><td><code>atthasdef</code></td> <td><code>bool</code></td> <td></td> <td>该列有一个默认值，在此情况下在<code>pg_attrdef</code>目录中会有一个对应项来真正记录默认值。</td></tr></tbody></table></li></ul></li> <li><p>pg_namespace</p> <ul><li><p><code>pg_namespace</code>存储名字空间。名字空间是SQL模式之下的结构：每个名字空间拥有一个独立的表、类型等的集合，且其中没有名字冲突</p></li> <li><table><thead><tr><th>名称</th> <th>类型</th> <th>引用</th> <th>描述</th></tr></thead> <tbody><tr><td><code>oid</code></td> <td><code>oid</code></td> <td></td> <td>行标识符（隐藏属性，必须被显式选择才会显示）</td></tr> <tr><td><code>nspname</code></td> <td><code>name</code></td> <td></td> <td>名字空间的名字</td></tr> <tr><td><code>nspowner</code></td> <td><code>oid</code></td> <td><code>pg_authid.oid</code></td> <td>名字空间的拥有者</td></tr> <tr><td><code>nspacl</code></td> <td><code>aclitem[]</code></td> <td></td> <td>访问权限，详见<a href="http://www.postgres.cn/docs/10/sql-grant.html" target="_blank" rel="noopener noreferrer">GRANT<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="http://www.postgres.cn/docs/10/sql-revoke.html" target="_blank" rel="noopener noreferrer">REVOKE<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr></tbody></table></li></ul></li> <li><p>pg_attrdef</p> <ul><li><p>存储列的默认值,显示指定时才会有</p></li> <li><table><thead><tr><th>名称</th> <th>类型</th> <th>引用</th> <th>描述</th></tr></thead> <tbody><tr><td><code>oid</code></td> <td><code>oid</code></td> <td></td> <td>行标识符（隐藏属性，必须被显式选择才会显示）</td></tr> <tr><td><code>adrelid</code></td> <td><code>oid</code></td> <td><code>pg_class.oid</code></td> <td>该列所属的表</td></tr> <tr><td><code>adnum</code></td> <td><code>int2</code></td> <td><code>pg_attribute.attnum</code></td> <td>列号</td></tr> <tr><td><code>adbin</code></td> <td><code>pg_node_tree</code></td> <td></td> <td>列默认值的内部表示</td></tr> <tr><td><code>adsrc</code></td> <td><code>text</code></td> <td>不推荐使用</td> <td>默认值的人类可读的表示</td></tr></tbody></table></li></ul></li> <li><p>pg_table_is_visible</p> <ul><li>该表/视图是否在搜索路径中可见, 返回boolean型</li> <li>如果一个表所在的模式在搜索路径中，并且没有同名的表出现在搜索路径的更早的地方，那么就说这个表视可见的。 它等效于表可以不带明确模式修饰进行引用。</li></ul></li> <li><p>format_type</p> <ul><li>format_type(type_oid,typemod)</li> <li>获取一个数据类型的SQL名称, 返回字符串</li></ul></li> <li><p>pg_get_expr</p> <ul><li>pg_get_expr(expr_text,relation_oid) / pg_get_expr(expr_text,relation_oid, pretty_bool)</li> <li>反编译一个表达式的内部形式，假设其中的任何Vars都引用第二个参数指出的关系, 返回text</li></ul></li> <li><p>substring</p> <ul><li>substring(string [from int] [for int])</li> <li>抽取字符串</li> <li>substring(string from pattern)</li> <li>抽取匹配 POSIX 正则表达式的子字串</li> <li>substring(string from pattern for escape)</li> <li>抽取匹配SQL正则表达式的子字串</li></ul></li> <li><p>查看模式</p></li> <li><p>搜索路径</p></li> <li><p>一般来说，找表可以加Schema，如果不加就找search_path指定的Schema</p></li></ul></li></ul> <h3 id="规则"><a href="#规则" class="header-anchor">#</a> 规则</h3> <ul><li><code>sql CREATE [OR REPLACE] RULE name AS ON 事件 TO table_name [WHERE condition ] DO [ALSO | INSTEAD] {NOTHING | 命令 | （命令 ; 命令 ......）}</code></li> <li>规则实际上 是一种命令转换机制或者命令宏</li> <li>这种转换会在命令的执行开始之前进行</li></ul> <h3 id="error"><a href="#error" class="header-anchor">#</a> error</h3> <ul><li>duplicate key value violates unique constraint &quot;kick_privilege_pkey&quot;</li> <li>kick_privilege 表的 kick_privilege_id_seq 小于 max(id), 导致插入数据时,新生成的id 已存在</li></ul> <h3 id="死锁"><a href="#死锁" class="header-anchor">#</a> 死锁</h3> <h4 id="锁类型"><a href="#锁类型" class="header-anchor">#</a> 锁类型</h4> <ul><li>行级锁</li> <li>表级锁</li></ul> <h4 id="表级锁"><a href="#表级锁" class="header-anchor">#</a> 表级锁</h4> <ul><li>AcessShareLock（访问共享锁）: 通过在一张表或多张表一条 SELECT 语句检索数据时就会自动获取。这个模式会阻塞在同一张表下的 ALTER TABLE，DROP TABLE 以及 VACUUM(垃圾收集以及可选地分析一个数据库) (AccessExclusiveLock，访问排他锁)操作。</li> <li>RowShareLock （行共享锁）: 通过一条SELECT...FOR UPDATE子句自动获取。它会在同一张表上阻塞并发的ExclusiveLock(排他锁）以及AccessExclusiveLock(访问排他锁）。</li> <li>RowExclusiveLock （行排他锁）: 通过UPDATE，INSERT，或者 DELETE命令自动获取。它会在同一张表上阻塞ALTER TABLE，DROP TABLE,VACUUM 和 CREATE INDEX命令。（ShareLock[共享锁]，ShareRowExclusiveLock[共享行排他锁]，ExclusiveLock[排他锁]，AccessExclusiveLock[访问排他锁]）。</li> <li>ShareLock（共享锁）: 通过CREATE INDEX命令自动获取。它会在同一张表上阻塞INSERT, UPDATE, DELETE, ALTER TABLE, DROP TABLE, 以及 VACUUM命令.(RowExclusiveLock[行排他锁], ShareRowExclusiveLock[共享行排他锁], ExclusiveLock[排他锁], 以及 AccessExclusiveLock[访问排他锁])</li> <li>ShareRowExclusiveLock（共享行排他锁）: 这个锁模式与ExclusiveLock（排他锁）是一样的，但是它允许获取并发的 RowShareLock（行共享锁）</li> <li>SHARE UPDATE EXCLUSIVE 锁: 与”Share update exclusive,Share,Share row ,exclusive,exclusive,Access exclusive”模式冲突，这种模式保护一张表不被并发的模式更改和VACUUM; “Vacuum(without full), Analyze ”和 “Create index concurrently”命令会获得这种类型锁。</li> <li>ExclusiveLock（排他锁）: ”每个事务在它的事务ID的整个时间里都会持有一个Exclusive Lock（排他锁）”。如果一个事务发现它需要特别地等待另一个事务，它就会尝试地在另一个事务ID上获取 Share Lock（共享锁）。这仅当另一个事务结束并释放它自己的锁时才会成功。（注意，冲突）。Exclusive Lock（排他锁）会在同一张表上阻塞INSERT, UPDATE, DELETE, CREATE INDEX, ALTER TABLE,DROP TABLE, SELECT...FOR UPDATE 以及 VACUUM命令。</li></ul> <h4 id="行级锁"><a href="#行级锁" class="header-anchor">#</a> 行级锁</h4> <ul><li>Exclusive lock（排他锁）: 当通过UPDATE或DELETE命中行时就会自动获取该锁。锁会一直被持有，直到一个事务提交或回滚了。为了手动获取exclusive-lock（排他锁），可以使用SELECT FOR UPDATE。</li> <li>Share-Lock（共享锁）：当通过SELECT...FOR SHARE命中行时就会自动获取该锁。</li></ul> <h4 id="死锁解决办法"><a href="#死锁解决办法" class="header-anchor">#</a> 死锁解决办法</h4> <ol><li>查看数据库进程
<ol><li>SELECT * FROM pg_stat_activity WHERE datname='db name';</li></ol></li> <li>杀掉进程
<ol><li>SELECT pg_terminate_backend(PID)</li></ol></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">7/16/2021, 5:49:13 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Essay/resource/database/SQL/MySQL.html" class="prev">
        MySQL
      </a></span> <span class="next"><a href="/Essay/resource/database/MongoDB.html">
        基础
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Essay/assets/js/app.a80fbb9d.js" defer></script><script src="/Essay/assets/js/2.8038fab4.js" defer></script><script src="/Essay/assets/js/35.21e76c2a.js" defer></script>
  </body>
</html>
