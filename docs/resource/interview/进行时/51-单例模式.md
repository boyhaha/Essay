# 51-单例模式

* 基于__new__(线程安全)

```
import threading

class Singleton(object):
        __instance_lock = threading.Lock()
        __fist_flag = True

        def __init__(self):
                if self.__fist_flag:
                    self.__fist_flag = False

        def __new__(cls, *args, **kwargs):
                if not hasattr(Singleton, "__instance_lock"):
                        with Singleton.__instance_lock:
                                if not hasattr(Singleton, "__instance_lock"):
                                        Singleton.__instance_lock = object.__new__(cls)
                return Singleton.__instance_lock
```

* 使用装饰器
* 使用模块：天然的单例
* 使用元类

使用场景

* 资源共享的情况下，避免由于资源操作时导致的性能损耗。如日志文件，应用配置。
* 控制资源的情况下，方便资源之间的互相通信。如线程池等。
    * 1.网站的计数器 2.应用配置 3.多线程池 4.数据库配置，数据库连接池 5.应用程序的日志应用....
